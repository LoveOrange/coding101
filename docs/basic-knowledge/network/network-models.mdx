---
sidebar_position: 1
draft: true
---

# 网络模型

:::tip
网络模型的核心要点：
1. 为什么要有网络模型 ── 规范不同设备之间的连接问题
2. 基本的网络模型 ── OSI 七层模型与 TCP/IP 四层模型
:::

## 1. 简述

### 1.1. 为什么需要网络模型

网络的一个基本作用就是将不同的设备连接起来进行通信。在“万物互联”的当下，参与到网络通信的设备数量庞大，种类繁多，你无法想象在互联网的另一头，与你的电脑通信的是一台电脑，还是一部手机，甚至可能是冰箱或者彩电。因此，如何规范不同设备之间网络数据的传输方式，就是一个必须解决的问题。

网络模型就是用来规范不同设备之间网络数据传输的标准。

### 1.2. OSI 七层模型与 TCP/IP 四层模型

当我们提到网络模型时，通常指 OSI 七层模型与 TCP/IP 四层模型。

OSI 模型由国际标准化组织（ISO）提出，旨在为不同的客户端系统提供一个共同的标准，以便于它们能够相互通信。作为标准化的模型，OSI 具备扎实的理论基础，但是此时 TCP/IP 模型已经应用到了早起互联网上，因此 OSI 模型并没有在实际环境得到应用，如今更多的作为教学模型被使用。

与 OSI 相反，TCP/IP 模型作为早期互联网通信的基础模型，更早的在实际的网络环境中得到使用。虽然 TCP/IP 模型层级划分上不像 OSI 模型那样精细，但是其更加符合实际的应用场景，或者说作为互联网通信的实际标准，真实的网络传输都是遵照 TCP/IP 模型来设计。

## 2. OSI 七层模型

### 2.1. OSI 模型设计原则

虽然 OSI 七层模型基本没有在实际环境中被使用，但是其合理的划分了网络层次，为网络协议的设计提供了理论指导。作为一个教学工具，能够帮助我们更好的理解数据是如何在网络中传输的。

OSI 模型的分层基本原则包括：

1. 应该在需要一个不同抽象的地方创建一层
2. 每一层都应该执行一个明确定义的功能
3. 层与层边界的选择应该使跨层的信息流量最小
4. 层数不能太多也不能太少，既要保证不同层级功能解耦，也不能让系统过于庞大

让我们从上到下，逐层分析 OSI 七层模型。

### 2.2. OSI 模型 ── 自顶向下介绍

#### 2.2.1. Application - 应用层

应用层是 OSI 七层模型中的最高层，也是第七层。

这是最接近用户的一层，我们日常使用的网络服务就位于这一层级。最典型的例子就是浏览网页使用的 HTTPS、HTTP 协议，收发邮件使用的 SMTP 协议等等。

#### 2.2.2. Presentation - 表示层

表示层是 OSI 七层模型中的第六层。也是 OSI 模型中最抽象的一层。

应用层中包含了用户会直接使用到的服务，可以是查看新闻，浏览图片，观看视频等等。但是一切数据的本质都是二进制数据流，在传输过程中，我们传输的也都是 **0** 与 **1** 的字节流。那么如何将这些二进制信息映射到用户可以理解的信息，这就是表示层需要做的事情。

**表示层** 规定了网络传输的数据会以什么形式展示，比如文字、图片等等；一些网络接口使用到的数据结构，也是在表示层进行管理。

#### 2.2.3. Session - 会话层

很多网站要求用户登录后才可以访问。当我们登录网站后，我们就与服务器之间建立了「会话（Session）」。

**会话层**就是用来维护这些登录信息。

:::info
OSI 模型处于解耦的目的，会单独划分出**表示层**与**会话层**。

而现代互联网应用中，普遍都是由应用层直接处理用户的登录信息，这也与 **TCP/IP** 模型的层级划分相符。
:::

#### 2.2.4. Transport - 传输层

传输层是 OSI 七层模型中的第四层，也是 OSI 七层模型中，最核心的一层。

传输层是 OSI 七层模型的一个分水岭，在传输层之上的层级（应用层，表示层，会话层），更多的关心需要传输哪些用户的数据，更偏向于用户使用的应用。而从传输层开始，更多的关系一件事：**数据如何在网络中传输**。

传输层中，最核心的协议就是 TCP 与 UDP。我们会在 [TCP 与 UDP 传输协议](./tcp_udp.mdx) 中详细讨论。

#### 2.2.5. Network - 网络层

网络层是 OSI 七层模型中的第三层。

如果说传输层规范了数据如何在网络中传输，那么网络层就是解决「**数据传输到哪里**」的问题。

在网络层中，最重要的就是 IP 协议，用于表示网络设备在互联网中的地址。

#### 2.2.6. Data Link - 数据链路层

数据链路层是 OSI 七层模型中的第二层。

在知道数据传输的地址（IP 地址）后，我们还需要建立一条到目的地的“**通道**”。

通常当我们访问网络应用时，不会有一条网线连接我们与目标服务器，而是通过路由器、交换机等设备，将数据传输到目的地。

数据链路层就是负责建立这条“**通道**”，链接我们与目标服务器之间的所有设备。

既然是建立设备之间的链接路径，那么就会应用到设备的身份标识，也就是 MAC 地址。

#### 2.2.7. Physical - 物理层

物理层是 OSI 七层模型中的第一层，也是 OSI 模型的最底层。

物理层不用多说，就是真实的网络设备了，包括网线、光纤、无线网络设备等等。

### 2.3. OSI 模型示意图

引用 [OSI - Wikipedia](https://en.wikipedia.org/wiki/OSI_model) 中的示意图：

![OSI 七层模型示意图](./assets/osi_model.jpg)

作者 MrsValdry，CC BY-SA 3.0，https://commons.wikimedia.org/w/index.php?curid=16941456

## 3. TCP/IP 四层模型

从上到下

1. Application - 应用层
2. Transport - 传输层
3. Internet - 网络层
4. Link - 链路层
